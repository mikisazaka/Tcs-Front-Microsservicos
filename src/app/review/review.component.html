<div *ngIf="listaReviews && authService.isLoggedIn()" class="secao-avaliacoes" style="margin-top: 3rem">
  <div class="lista-reviews-container">
    <div *ngFor="let review of listaReviews" class="review-card">
      <div class="flex justify-between items-center">
        <div class="flex gap-2">
          <svg class="w-6 h-6 text-gray-800 dark:text-white" style="background-color: #000; border-radius: 50%;"
          aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#fff"
          viewBox="0 0 24 24">
          <path fill-rule="evenodd"
            d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4h-4Z"
            clip-rule="evenodd" />
        </svg>
        <p>{{review.username}}</p>
        </div>
        <div>
          <button style="background-color: red; border-radius: 50%; padding: .25rem; cursor: pointer;" (click)="delete(review.reviewId)">
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"/>
            </svg>              
          </button>
        </div>
      </div>
      <div class="flex items-center gap-3">
        <p class="review-title">{{ review.title }}</p>
        <div class="flex items-center">
          <ng-container *ngFor="let starType of getStarArray(review.rating)">
            <div [ngSwitch]="starType">
              <svg
                *ngSwitchCase="'full'"
                class="w-5 h-5 text-yellow-400"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M13.849 4.22c-.684-1.626-3.014-1.626-3.698 0L8.397 8.387l-4.552.361c-1.775.14-2.495 2.331-1.142 3.477l3.468 2.937-1.06 4.392c-.413 1.713 1.472 3.067 2.992 2.149L12 19.35l3.897 2.354c1.52.918 3.405-.436 2.992-2.15l-1.06-4.39 3.468-2.938c1.353-1.146.633-3.336-1.142-3.477l-4.552-.36-1.754-4.17Z"
                />
              </svg>
              <svg
                *ngSwitchCase="'half'"
                class="w-5 h-5 text-yellow-400"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  fill-rule="evenodd"
                  d="M13 4.024v-.005c0-.053.002-.353-.217-.632a1.013 1.013 0 0 0-1.176-.315c-.192.076-.315.193-.35.225-.052.05-.094.1-.122.134a4.358 4.358 0 0 0-.31.457c-.207.343-.484.84-.773 1.375a168.719 168.719 0 0 0-1.606 3.074h-.002l-4.599.367c-1.775.14-2.495 2.339-1.143 3.488L6.17 15.14l-1.06 4.406c-.412 1.72 1.472 3.078 2.992 2.157l3.94-2.388c.592-.359.958-.996.958-1.692v-13.6Zm-2.002 0v.025-.025Z"
                  clip-rule="evenodd"
                />
              </svg>
              <svg
                *ngSwitchCase="'empty'"
                class="w-5 h-5 text-gray-300"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M13.849 4.22c-.684-1.626-3.014-1.626-3.698 0L8.397 8.387l-4.552.361c-1.775.14-2.495 2.331-1.142 3.477l3.468 2.937-1.06 4.392c-.413 1.713 1.472 3.067 2.992 2.149L12 19.35l3.897 2.354c1.52.918 3.405-.436 2.992-2.15l-1.06-4.39 3.468-2.938c1.353-1.146.633-3.336-1.142-3.477l-4.552-.36-1.754-4.17Z"
                />
              </svg>
            </div>
          </ng-container>
        </div>
      </div>
      <p style="color: rgb(88, 88, 88); font-size: 14px">
        {{ review.createdAt | date : "dd/MM/yyyy HH:mm" }}
      </p>
      <p class="review-comment">{{ review.comment }}</p>
    </div>
  </div>
</div>

<div *ngIf="!listaReviews" class="grid justify-center text-center" 
style="background-image: url('../../assets/images/n-data.svg'); height: calc(100vh - 82px); background-repeat: no-repeat; background-position: center;">
  <div style="margin-top: 25rem;">
    <div style="background-color: transparent; border-radius: 5px; padding: .5rem;">
      <p style="font-weight: bold; font-size: 30px">
        Você ainda possui avaliações!
      </p>
      <p>Navegue pelo catálogo e faça sua primeira avaliação.</p>
    </div>
    <div class="flex justify-center" style="margin-top: 1.5rem;">
      <button
      (click)="goToLivros()"
      id="btn-ver-livros"
    >
      VER LIVROS
    </button>
    </div>
  </div>
</div>

<div *ngIf="!authService.isLoggedIn()" class="flex justify-center" style="margin-top: 25rem;">
  <p style="font-size: 30px;">Você precisa fazer login para ver suas avaliações!</p>
</div>